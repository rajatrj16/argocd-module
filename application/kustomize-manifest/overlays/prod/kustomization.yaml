apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

bases:
  - ../../base

commonLabels:
  purpose: Argocd-demo
  env : prod

#namePrefix: prod-

replicas:
  - name: web-frontend
    count: 3
  - name: customers-v2
    count: 4


patches:
  - target:
      kind: Deployment
      name: web-frontend
    patch: |-
      - op: replace
        path: /spec/template/spec/containers/0/env/0/value
        value: 'http://customers.prod-app.svc.cluster.local'
  - target:
      kind: Deployment
      name: web-frontend
    patch: |-
      - op: replace
        path: /spec/template/spec/containers/0/image
        value: 'ruchabhange/frontend-image:58660c5c7662c923cf372be2dad3b21c24aa1fb1'
  - target:
      kind: Deployment
      name: customers-v2
    patch: |-
      - op: replace
        path: /spec/template/spec/containers/0/image
        value: 'ruchabhange/backend-image:58660c5c7662c923cf372be2dad3b21c24aa1fb1'
